package com.min.app06.config;

import org.mybatis.spring.SqlSessionFactoryBean;
import org.mybatis.spring.annotation.MapperScan;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.EnableAspectJAutoProxy;
import org.springframework.core.io.support.PathMatchingResourcePatternResolver;

import com.zaxxer.hikari.HikariConfig;
import com.zaxxer.hikari.HikariDataSource;

@Configuration
@MapperScan(basePackages = {
    "com.min.app06.mapper"
})
@EnableAspectJAutoProxy
public class AppConfig {

  @Bean
  public HikariConfig hikariconfig() {
    HikariConfig config = new HikariConfig();
    config.setDriverClassName("oracle.jdbc.OracleDriver");
    config.setJdbcUrl("jdbc:oracle:thin:@localhost:1521:xe");
    config.setUsername("GREEN");
    config.setPassword("GREEN");
    return config;
  }
  
  @Bean
  public HikariDataSource hikariDataSource() {
    return new HikariDataSource(hikariconfig());
  }
  
  public SqlSessionFactoryBean sqlSessionFactoryBean() {
    SqlSessionFactoryBean factoryBean = new SqlSessionFactoryBean();
    factoryBean.setDataSource(hikariDataSource());
    factoryBean.setConfigLocation(new PathMatchingResourcePatternResolver().getResource("classpath:com/min/app06/mybatis/config/mybatis-config.xml"));
  }
  
}
